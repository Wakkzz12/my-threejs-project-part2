import{S as v,h as k,i as w,B as R,j as P,a as L,A as W,k as D,l as E,m as G,R as X,P as Y,O as z,W as j,n as p,C as A}from"./OrbitControls-DuS-ZZ0n.js";import{G as B}from"./lil-gui.esm-ItvJbUpV.js";const d=new B,x=document.querySelector("canvas.webgl"),u=new v;function F(){const e=document.createElement("canvas");e.width=512,e.height=512;const t=e.getContext("2d"),o=64;for(let a=0;a<8;a++)for(let s=0;s<8;s++)t.fillStyle=(s+a)%2===0?"#ffffff":"#333333",t.fillRect(s*o,a*o,o,o);return new p(e)}function I(){const e=document.createElement("canvas");e.width=512,e.height=512;const t=e.getContext("2d"),o=t.createLinearGradient(0,0,512,512);return o.addColorStop(0,"#ff0000"),o.addColorStop(.5,"#00ff00"),o.addColorStop(1,"#0000ff"),t.fillStyle=o,t.fillRect(0,0,512,512),new p(e)}function U(){const e=document.createElement("canvas");e.width=512,e.height=512;const t=e.getContext("2d");for(let o=0;o<512;o+=32)for(let a=0;a<512;a+=32){const s=Math.floor(a/512*255),b=Math.floor(o/512*255),M=128;t.fillStyle=`rgb(${s}, ${b}, ${M})`,t.fillRect(a,o,32,32)}return new p(e)}function m(){const e=document.createElement("canvas");e.width=512,e.height=512;const t=e.getContext("2d");t.fillStyle="#8B4513",t.fillRect(0,0,512,512),t.strokeStyle="#654321",t.lineWidth=3;for(let o=0;o<512;o+=64)t.beginPath(),t.moveTo(o,0),t.lineTo(o,512),t.stroke();for(let o=0;o<512;o+=128)t.beginPath(),t.moveTo(0,o),t.lineTo(512,o),t.stroke();return t.fillStyle="#FFD700",t.beginPath(),t.arc(400,256,20,0,Math.PI*2),t.fill(),new p(e)}const c={checkerboard:F(),gradient:I(),colorful:U(),door:m(),normal:m()};console.log("✓ Procedural textures created!");const g=new k;g.load("/static/textures/door/color.jpg",e=>{e.colorSpace=w,c.door=e,console.log("✓ Door color texture loaded!"),n.textureType==="door"&&i()},void 0,()=>console.warn("⚠ Door color texture not found, using fallback."));g.load("/static/textures/door/normal.jpg",e=>{c.normal=e,console.log("✓ Door normal texture loaded!")},void 0,()=>console.warn("⚠ Door normal texture not found, using fallback."));g.load("/static/textures/minecraft.png",e=>{e.colorSpace=w,c.minecraft=e,console.log("✓ Minecraft texture loaded!"),n.textureType==="minecraft"&&i()},void 0,e=>{console.warn("⚠ Minecraft texture not found at /static/textures/minecraft.png")});const n={textureType:"checkerboard",repeatX:1,repeatY:1,offsetX:0,offsetY:0,rotation:0,wrapMode:"repeat"},$=new R(1,1,1),l=new P({map:c.checkerboard}),T=new L($,l);u.add(T);const q=new W(16777215,.5);u.add(q);const y=new D(16777215,1);y.position.set(2,2,3);u.add(y);function i(){const e=c[n.textureType];if(!e){console.error("Texture not found:",n.textureType);return}e.repeat.set(n.repeatX,n.repeatY),e.offset.set(n.offsetX,n.offsetY),e.rotation=n.rotation*Math.PI,e.center.set(.5,.5);const t={repeat:X,mirrored:G,clamp:E};e.wrapS=t[n.wrapMode],e.wrapT=t[n.wrapMode],e.needsUpdate=!0,n.textureType==="door"?(l.map=c.door,l.normalMap=c.normal):(l.map=e,l.normalMap=null),l.needsUpdate=!0,console.log("✓ Texture updated to:",n.textureType)}d.add(n,"textureType",["checkerboard","gradient","colorful","door","minecraft","normal"]).onChange(i).name("Texture Type");d.add(n,"repeatX",.1,5,.1).onChange(i);d.add(n,"repeatY",.1,5,.1).onChange(i);d.add(n,"offsetX",-1,1,.1).onChange(i);d.add(n,"offsetY",-1,1,.1).onChange(i);d.add(n,"rotation",0,2,.1).onChange(i).name("Rotation (×π)");d.add(n,"wrapMode",["repeat","mirrored","clamp"]).onChange(i);const r={width:window.innerWidth,height:window.innerHeight},f=new Y(75,r.width/r.height,.1,100);f.position.set(1.5,1,2);u.add(f);const C=new z(f,x);C.enableDamping=!0;const h=new j({canvas:x});h.setSize(r.width,r.height);h.setPixelRatio(Math.min(window.devicePixelRatio,2));window.addEventListener("resize",()=>{r.width=window.innerWidth,r.height=window.innerHeight,f.aspect=r.width/r.height,f.updateProjectionMatrix(),h.setSize(r.width,r.height)});const H=new A,S=()=>{const e=H.getElapsedTime();T.rotation.y=e*.5,C.update(),h.render(u,f),requestAnimationFrame(S)};S();console.log("✅ Activity 9: Working with procedural + door textures!");
